<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>틱택토 게임</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    h1 {
      margin-top: 20px;
    }
    /* 게임 상태 메시지 */
    #status {
      margin-top: 20px;
      font-size: 24px;
      font-weight: bold;
    }
    /* 점수판 */
    #scoreboard {
      margin-top: 10px;
      font-size: 18px;
    }
    /* 보드 영역 */
    .board {
      display: grid;
      grid-template-columns: repeat(3, 120px);
      grid-gap: 10px;
      justify-content: center;
      margin-top: 40px;
    }
    /* 각 셀(카드)의 스타일 */
    .cell {
      width: 120px;
      height: 120px;
      perspective: 1000px; /* 3D 효과를 위한 원근감 */
      cursor: pointer;
    }
    /* 플립 카드 컨테이너 */
    .flip-card {
      width: 100%;
      height: 100%;
      position: relative;
    }
    /* 플립 카드 내부 (회전 애니메이션 적용) */
    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    /* 셀이 클릭되어 뒤집혔을 때 */
    .cell.flipped .flip-card-inner {
      transform: rotateY(180deg);
    }
    /* 앞면과 뒷면 공통 스타일 */
    .flip-card-front, .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 10px;
    }
    /* 앞면은 180도 회전 (뒤집혔을 때 보이도록) */
    .flip-card-front {
      transform: rotateY(180deg);
    }
    /* 이미지가 칸 전체를 채우도록 */
    .flip-card-front img,
    .flip-card-back img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
    }
    /* 버튼 스타일 */
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      background-color: #3366cc;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #254b8b;
    }
    /* 두 버튼이 나란히 배치되도록 */
    .buttons {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
  </style>
</head>
<body>
  <h1>틱택토 게임</h1>
  <div id="status">현재 플레이어: X</div>
  <div id="scoreboard">X 승: 0회, O 승: 0회, 무승부: 0회</div>
  <div class="board">
    <!-- 9칸의 셀 생성 (인덱스 0~8) -->
    <!-- 셀 구조: .cell > .flip-card > .flip-card-inner > (.flip-card-front, .flip-card-back) -->
    <div class="cell" data-index="0">
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <img src="" alt="플레이어 마크">
          </div>
          <div class="flip-card-back">
            <img src="https://cdn-icons-png.flaticon.com/128/956/956929.png" alt="카드 뒷면">
          </div>
        </div>
      </div>
    </div>
    <div class="cell" data-index="1">
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <img src="" alt="플레이어 마크">
          </div>
          <div class="flip-card-back">
            <img src="https://cdn-icons-png.flaticon.com/128/956/956929.png" alt="카드 뒷면">
          </div>
        </div>
      </div>
    </div>
    <div class="cell" data-index="2">
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <img src="" alt="플레이어 마크">
          </div>
          <div class="flip-card-back">
            <img src="https://cdn-icons-png.flaticon.com/128/956/956929.png" alt="카드 뒷면">
          </div>
        </div>
      </div>
    </div>
    <div class="cell" data-index="3">
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <img src="" alt="플레이어 마크">
          </div>
          <div class="flip-card-back">
            <img src="https://cdn-icons-png.flaticon.com/128/956/956929.png" alt="카드 뒷면">
          </div>
        </div>
      </div>
    </div>
    <div class="cell" data-index="4">
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <img src="" alt="플레이어 마크">
          </div>
          <div class="flip-card-back">
            <img src="https://cdn-icons-png.flaticon.com/128/956/956929.png" alt="카드 뒷면">
          </div>
        </div>
      </div>
    </div>
    <div class="cell" data-index="5">
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <img src="" alt="플레이어 마크">
          </div>
          <div class="flip-card-back">
            <img src="https://cdn-icons-png.flaticon.com/128/956/956929.png" alt="카드 뒷면">
          </div>
        </div>
      </div>
    </div>
    <div class="cell" data-index="6">
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <img src="" alt="플레이어 마크">
          </div>
          <div class="flip-card-back">
            <img src="https://cdn-icons-png.flaticon.com/128/956/956929.png" alt="카드 뒷면">
          </div>
        </div>
      </div>
    </div>
    <div class="cell" data-index="7">
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <img src="" alt="플레이어 마크">
          </div>
          <div class="flip-card-back">
            <img src="https://cdn-icons-png.flaticon.com/128/956/956929.png" alt="카드 뒷면">
          </div>
        </div>
      </div>
    </div>
    <div class="cell" data-index="8">
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <img src="" alt="플레이어 마크">
          </div>
          <div class="flip-card-back">
            <img src="https://cdn-icons-png.flaticon.com/128/956/956929.png" alt="카드 뒷면">
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 두 개의 버튼: 게임 재시작(보드 리셋, 먼저하는 플레이어 교체) / 점수 초기화 -->
  <div class="buttons">
    <button id="reset">게임 재시작</button>
    <button id="scoreReset">점수 초기화</button>
  </div>

  <script>
    // 게임 관련 변수들
    const statusDisplay = document.getElementById('status');
    const scoreboardDisplay = document.getElementById('scoreboard');
    const resetButton = document.getElementById('reset');
    const scoreResetButton = document.getElementById('scoreReset');

    // 현재 게임 진행 상태
    let gameActive = true;
    // 보드의 9칸 상태 (빈 문자열: 미선택)
    let gameState = ["", "", "", "", "", "", "", "", ""];

    // 누가 먼저 시작할지 관리 (매 게임마다 번갈아 시작)
    let firstPlayer = 'X';
    let currentPlayer = firstPlayer;

    // 승리 횟수 및 무승부 횟수
    let xWins = 0;
    let oWins = 0;
    let draws = 0;

    // 이미지 URL placeholders (추후 사용하실 링크로 변경)
    const backImageURL = "https://cdn-icons-png.flaticon.com/128/956/956929.png"; // 카드 뒷면 이미지
    const xImageURL = "https://cdn-icons-mp4.flaticon.com/512/10971/10971010.mp4";       // X 플레이어 이미지
    const oImageURL = "https://cdn-icons-mp4.flaticon.com/512/10970/10970986.mp4";       // O 플레이어 이미지

    // 승리 조건 배열
    const winningConditions = [
      [0,1,2],
      [3,4,5],
      [6,7,8],
      [0,3,6],
      [1,4,7],
      [2,5,8],
      [0,4,8],
      [2,4,6]
    ];

    // 점수판 업데이트 함수
    function updateScoreboard() {
      scoreboardDisplay.textContent = `X 승: ${xWins}회, O 승: ${oWins}회, 무승부: ${draws}회`;
    }

    // 셀 클릭 이벤트 처리 함수
    function handleCellClick(e) {
      const cell = e.currentTarget;
      const index = cell.getAttribute('data-index');

      // 이미 선택된 칸이거나 게임 종료 시 무시
      if (gameState[index] !== "" || !gameActive) return;

      // 현재 플레이어의 마크 기록
      gameState[index] = currentPlayer;

      // 셀에 'flipped' 클래스를 추가해 카드 뒤집기 효과 적용
      cell.classList.add('flipped');

      // 해당 셀의 앞면 이미지 업데이트 (플레이어에 따라)
      const frontImg = cell.querySelector('.flip-card-front img');
      if (currentPlayer === 'X') {
        frontImg.src = xImageURL;
        frontImg.alt = "X";
      } else {
        frontImg.src = oImageURL;
        frontImg.alt = "O";
      }

      // 승리 여부 체크
      if (checkWin()) {
        statusDisplay.textContent = `플레이어 ${currentPlayer} 승리!`;
        gameActive = false;
        // 승리한 플레이어에 따라 점수 업데이트
        if (currentPlayer === 'X') {
          xWins++;
        } else {
          oWins++;
        }
        updateScoreboard();
        return;
      }

      // 모든 칸이 채워졌다면 무승부 처리
      if (gameState.every(cell => cell !== "")) {
        statusDisplay.textContent = "무승부!";
        gameActive = false;
        draws++;
        updateScoreboard();
        return;
      }

      // 플레이어 교체
      currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
      statusDisplay.textContent = `현재 플레이어: ${currentPlayer}`;
    }

    // 승리 조건 체크 함수
    function checkWin() {
      for (let condition of winningConditions) {
        const [a, b, c] = condition;
        if (gameState[a] && gameState[a] === gameState[b] && gameState[a] === gameState[c]) {
          return true;
        }
      }
      return false;
    }

    // 게임 보드 리셋 함수 (게임이 끝난 후 "게임 재시작" 버튼 클릭 시)
    function resetGame() {
      // 게임 재시작 시 현재 저장된 firstPlayer를 시작 플레이어로 지정
      currentPlayer = firstPlayer;
      // 다음 게임에서는 먼저하는 플레이어를 반대로 변경
      firstPlayer = (firstPlayer === 'X') ? 'O' : 'X';

      gameActive = true;
      gameState = ["", "", "", "", "", "", "", "", ""];
      statusDisplay.textContent = `현재 플레이어: ${currentPlayer}`;

      // 모든 셀의 플립 효과와 이미지 초기화
      document.querySelectorAll('.cell').forEach(cell => {
        cell.classList.remove('flipped');
        const frontImg = cell.querySelector('.flip-card-front img');
        frontImg.src = "";
        frontImg.alt = "플레이어 마크";
      });
    }

    // 점수판 초기화 함수 (점수 초기화 버튼 클릭 시)
    function resetScoreboard() {
      xWins = 0;
      oWins = 0;
      draws = 0;
      updateScoreboard();
    }

    // 각 셀에 클릭 이벤트 리스너 등록
    document.querySelectorAll('.cell').forEach(cell => {
      cell.addEventListener('click', handleCellClick);
    });

    // 게임 재시작 버튼에 클릭 이벤트 리스너 등록
    resetButton.addEventListener('click', resetGame);

    // 점수 초기화 버튼에 클릭 이벤트 리스너 등록
    scoreResetButton.addEventListener('click', resetScoreboard);
  </script>
</body>
</html>
